webpackJsonp([4],{914:function(e,t,a){a(940);var l=a(3)(a(942),a(945),"data-v-c6260028",null);e.exports=l.exports},940:function(e,t,a){var l=a(941);"string"==typeof l&&(l=[[e.i,l,""]]),l.locals&&(e.exports=l.locals);a(909)("02c370ce",l,!0)},941:function(e,t,a){t=e.exports=a(908)(),t.push([e.i,".deposit[data-v-c6260028]{display:flex;flex-flow:column;height:100%;position:relative}.deposit-table[data-v-c6260028]{flex:1}.deposit .cus-scroll[data-v-c6260028]{width:100%;overflow-x:scroll;height:20px;background:rgba(0,0,0,.4);position:absolute;top:38px}.deposit .cus-scroll-child[data-v-c6260028]{height:10px;background:#fff}.deposit .cus-scroll[data-v-c6260028]::-webkit-scrollbar,.deposit .cus-scroll[data-v-c6260028]::-webkit-scrollbar-track{height:20px}","",{version:3,sources:["D:/gdnybank/hnm-web/src/views/pages/bussiness/customerdetails.vue"],names:[],mappings:"AACA,0BACE,aAAc,AACd,iBAAkB,AAClB,YAAa,AACb,iBAAmB,CACpB,AACD,gCACI,MAAQ,CACX,AACD,sCACI,WAAkB,AAClB,kBAAmB,AACnB,YAAa,AACb,0BAA+B,AAC/B,kBAAmB,AACnB,QAAU,CACb,AACD,4CACM,YAAa,AACb,eAAkB,CACvB,AAID,wHACI,WAAa,CAChB",file:"customerdetails.vue",sourcesContent:["\n.deposit[data-v-c6260028] {\n  display: flex;\n  flex-flow: column;\n  height: 100%;\n  position: relative;\n}\n.deposit-table[data-v-c6260028] {\n    flex: 1;\n}\n.deposit .cus-scroll[data-v-c6260028] {\n    width: calc(100%);\n    overflow-x: scroll;\n    height: 20px;\n    background: rgba(0, 0, 0, 0.4);\n    position: absolute;\n    top: 38px;\n}\n.deposit .cus-scroll-child[data-v-c6260028] {\n      height: 10px;\n      background: white;\n}\n.deposit .cus-scroll[data-v-c6260028]::-webkit-scrollbar {\n    height: 20px;\n}\n.deposit .cus-scroll[data-v-c6260028]::-webkit-scrollbar-track {\n    height: 20px;\n}\n"],sourceRoot:""}])},942:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=a(33),r=a.n(l),i=a(943),s=a(944);t.default={data:function(){return{date_type:"业绩日期",form:{query_org:"1",query_type:"1",query_date:new Date((new Date).getTime()-864e5),minCurrent:"",maxCurrent:"",minAUM:"",maxAUM:"",minTermly:"",maxTermly:"",page:1,number:10},items3:[{key:"1",label:"1",title:"所属机构"},{key:"2",label:"2",title:"落地支行"}],account:s.a,customer:i.a,total:0,showColumns:[],showData:[],siteList:[],cusScrollWidth:0,dateRange:[]}},computed:{items:function(){return"2"==this.form.query_org?itemsList.filter(function(e){return 3!=parseInt(e.key)}):JSON.parse(r()(itemsList))}},mounted:function(){this.handler(),this.getSiteSelectList()},methods:{getCustomerDetail:function(){var e=this;this.showData=[];var t=JSON.parse(r()(this.form));if(2==this.form.query_type&&(delete t.query_date,this.dateRange.length>0?(t.minDate=this.formateTime(this.dateRange[0]),t.maxDate=this.formateTime(this.dateRange[1])):(t.minDate="",t.maxDate="")),1==this.form.query_type&&(t.query_date=this.formateTime(t.query_date||new Date)),!this.verification())return void this.$message.error("请将查询范围填写完整");this.$api.getCustomerDetail(t).then(function(t){e.showData=t.data.returnList,e.total=t.data.total})},handleMinChange:function(e){this.verification()},handleMaxChange:function(e){this.verification()},verification:function(){return this.form.minAUM>this.form.maxAUM?(this.$message.warning("起始数不能大于结束数"),!1):this.form.minCurrent>this.form.maxCurrent?(this.$message.warning("起始数不能大于结束数"),!1):!(this.form.minTermly>this.form.maxTermly)||(this.$message.warning("起始数不能大于结束数"),!1)},getSiteSelectList:function(){var e=this;"1"==this.form.query_org?this.$api.getSiteSelectList().then(function(t){e.siteList=t.data.siteList}):this.$api.getSiteSelectList({zh_flag:"1"}).then(function(t){e.siteList=t.data.siteList})},handleOverWidth:function(){var e=document.querySelector(".el-table__header");this.cusScrollWidth=e.style.width},cleanQureyData:function(){"1"!=this.form.query_type&&(this.$set(this.form,"tlrclt",null),this.$set(this.form,"minTermly",null),this.$set(this.form,"maxTermly",null),this.$set(this.form,"minCurrent",null),this.$set(this.form,"maxCurrent",null),this.$set(this.form,"minAUM",null),this.$set(this.form,"maxAUM",null),this.$set(this.form,"cusname",null)),"2"!=this.form.query_type&&this.$set(this.form,"tlrclt",null)},formateTime:function(e){var t=new Date(e),a=t.getFullYear(),l=t.getMonth()+1,r=t.getDate();return a+""+(l<10?"0"+l:l)+(r<10?"0"+r:r)},handler:function(){1==this.form.query_type?(this.showColumns=JSON.parse(r()(this.customer)),this.date_type="业绩日期",this.getCustomerDetail()):(this.showColumns=JSON.parse(r()(this.account)),this.date_type="开户日期",this.getCustomerDetail()),this.form.page=1,this.form.number=10,this.cleanQureyData()},exportDataInfos:function(){var e=this,t=JSON.parse(r()(this.form));2==this.form.query_type&&(delete t.query_date,this.dateRange.length>0?(t.minDate=this.formateTime(this.dateRange[0]),t.maxDate=this.formateTime(this.dateRange[1])):(t.minDate="",t.maxDate="")),1==this.form.query_type&&(t.query_date=this.formateTime(t.query_date||new Date)),this.$api.exportCustomerDetail(t).then(function(t){var a=t.data.fileName,l=t.data.filePath;if(null==a||null==l)return e.$message({message:"导出失败，系统异常",type:"error"}),!1;var r=document.createElement("form");document.body.appendChild(r),r.method="post",r.action="/hnm/txCtrl?txcode=mediaFile",r.enctype="multipart/form-data";var i=document.createElement("input"),s=document.createElement("input"),n=document.createElement("input"),o=document.createElement("input");i.setAttribute("name","filePath"),i.setAttribute("type","hidden"),i.setAttribute("value",l),s.setAttribute("name","fileName"),s.setAttribute("type","hidden"),s.setAttribute("value",a),n.setAttribute("name","isDownload"),n.setAttribute("type","hidden"),n.setAttribute("value","1"),o.setAttribute("name","isDelete"),o.setAttribute("type","hidden"),o.setAttribute("value","1"),r.appendChild(i),r.appendChild(s),r.appendChild(n),r.appendChild(o),r.submit(),e.$message({message:"导出成功",type:"success"})})},changeSize:function(e){this.form.number=e,this.getCustomerDetail()},changePage:function(e){this.form.page=e,this.getCustomerDetail()}},watch:{data:{handler:function(){var e=this;this.showData=JSON.parse(r()(this.data)),this.$nextTick(function(){e.handleOverWidth()})},deep:!0}}}},943:function(e,t,a){"use strict";t.a=[{label:"客户姓名",prop:"cltname"},{label:"客户号",prop:"cltnbr"},{label:"电话",prop:"mstcon"},{label:"活期余额",prop:"currents"},{label:"定期余额",prop:"termly"},{label:"AUM",prop:"aum"},{label:"维护机构",prop:"branch_name"}]},944:function(e,t,a){"use strict";t.a=[{label:"卡号",prop:"richnbr"},{label:"开户日期",prop:"opendate"},{label:"活期余额",prop:"currents"},{label:"定期余额",prop:"termly"},{label:"AUM",prop:"aum"},{label:"开户机构",prop:"branch_name"},{label:"服务点名称",prop:"site_name"}]},945:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-button",{staticStyle:{width:"200px"},attrs:{type:"warning",size:"small"},on:{click:e.exportDataInfos}},[e._v("\n    导出全部查询数据\n  ")]),e._v(" "),a("el-form",{attrs:{"label-width":"120",model:e.form}},[a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"选择条件:"}},[a("el-radio-group",{on:{change:e.getCustomerDetail},model:{value:e.form.query_org,callback:function(t){e.$set(e.form,"query_org",t)},expression:"form.query_org"}},e._l(e.items3,function(t){return a("el-radio",{key:t.key,attrs:{label:t.label}},[e._v("\n              "+e._s(t.title)+"\n            ")])}),1)],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"选择纬度:"},on:{change:e.cleanQureyData}},[a("el-radio",{attrs:{label:"1"},on:{change:e.handler},model:{value:e.form.query_type,callback:function(t){e.$set(e.form,"query_type",t)},expression:"form.query_type"}},[e._v("客户纬度")]),e._v(" "),a("el-radio",{attrs:{label:"2"},on:{change:e.handler},model:{value:e.form.query_type,callback:function(t){e.$set(e.form,"query_type",t)},expression:"form.query_type"}},[e._v("账户纬度")])],1)],1)],1),e._v(" "),1==e.form.query_type?a("el-row",[a("el-col",{attrs:{xl:5,lg:7,md:8,sm:24}},[a("el-form-item",{attrs:{label:"活期余额范围"}},[a("div",{staticStyle:{display:"flex"}},[a("el-input",{attrs:{size:"small",clearable:""},on:{change:e.handleMinChange},model:{value:e.form.minCurrent,callback:function(t){e.$set(e.form,"minCurrent",t)},expression:"form.minCurrent"}}),e._v("\n            ~\n            "),a("el-input",{attrs:{size:"small",clearable:""},on:{change:e.handleMaxChange},model:{value:e.form.maxCurrent,callback:function(t){e.$set(e.form,"maxCurrent",t)},expression:"form.maxCurrent"}})],1)])],1),e._v(" "),a("el-col",{attrs:{xl:5,lg:7,md:8,sm:24}},[a("el-form-item",{attrs:{label:"定期余额范围"}},[a("div",{staticStyle:{display:"flex"}},[a("el-input",{attrs:{size:"small",clearable:""},on:{change:e.handleMinChange},model:{value:e.form.minTermly,callback:function(t){e.$set(e.form,"minTermly",t)},expression:"form.minTermly"}}),e._v("\n            ~\n            "),a("el-input",{attrs:{size:"small",clearable:""},on:{change:e.handleMaxChange},model:{value:e.form.maxTermly,callback:function(t){e.$set(e.form,"maxTermly",t)},expression:"form.maxTermly"}})],1)])],1),e._v(" "),a("el-col",{attrs:{xl:5,lg:7,md:8,sm:24}},[a("el-form-item",{attrs:{label:"AUM范围"}},[a("div",{staticStyle:{display:"flex"}},[a("el-input",{attrs:{size:"small",clearable:"",min:0},on:{change:e.handleMinChange},model:{value:e.form.minAUM,callback:function(t){e.$set(e.form,"minAUM",t)},expression:"form.minAUM"}}),e._v("\n            ~\n            "),a("el-input",{attrs:{size:"small",clearable:"",min:0},on:{change:e.handleMaxChange},model:{value:e.form.maxAUM,callback:function(t){e.$set(e.form,"maxAUM",t)},expression:"form.maxAUM"}})],1)])],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"客户姓名"}},[a("div",{staticStyle:{display:"flex"}},[a("el-input",{attrs:{placeholder:"请输入姓名",clearable:""},model:{value:e.form.cusname,callback:function(t){e.$set(e.form,"cusname",t)},expression:"form.cusname"}})],1)])],1)],1):e._e(),e._v(" "),a("el-row",{staticStyle:{position:"relative"}},[a("el-col",{attrs:{span:12}},[a("el-form-item",[e._v(e._s(e.date_type)+"\n          "),1==e.form.query_type?a("el-date-picker",{attrs:{clearable:"",size:"small",type:"date"},model:{value:e.form.query_date,callback:function(t){e.$set(e.form,"query_date",t)},expression:"form.query_date"}}):a("el-date-picker",{attrs:{size:"small",type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.dateRange,callback:function(t){e.dateRange=t},expression:"dateRange"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"查询服务点:"}},[a("el-select",{attrs:{filterable:"",clearable:"",size:"small",placeholder:"请输入服务点名称"},model:{value:e.form.tlrclt,callback:function(t){e.$set(e.form,"tlrclt",t)},expression:"form.tlrclt"}},e._l(e.siteList,function(e){return a("el-option",{key:e.site_no,attrs:{label:e.site_name,value:e.site_no}})}),1)],1)],1)],1),e._v(" "),a("el-row",{staticStyle:{position:"relative"}},[a("el-col",{attrs:{span:3}},[a("el-form-item",{attrs:{"label-width":"0"}},[a("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-search"},on:{click:e.getCustomerDetail}},[e._v("查询\n          ")])],1)],1),e._v(" "),a("div",{staticClass:"cus-scroll"},[a("div",{staticClass:"cus-scroll-child",style:{width:e.cusScrollWidth}})])],1)],1),e._v(" "),a("div",{ref:"table",staticClass:"table"},[a("el-table",{attrs:{border:"",data:e.showData}},[e._l(e.showColumns,function(e,t){return[a("el-table-column",{key:t,attrs:{label:e.label,prop:e.prop,align:"center",width:"160"}})]})],2)],1),e._v(" "),a("el-pagination",{staticStyle:{"text-align":"center",margin:"10px 0"},attrs:{"current-page":e.form.page,"page-sizes":[10,20,30,40],"page-size":e.form.number,size:"small",layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.changeSize,"current-change":e.changePage}})],1)},staticRenderFns:[]}}});
//# sourceMappingURL=4.8c76031927eea3717b4d.js.map